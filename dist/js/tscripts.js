function myFunction(t){var e,n=JSON.parse(t),o="<table>";for(e=0;e<n.length;e++)o+="<tr><th>Train ID:</th><td>"+n[e].TRAIN_ID+"</td><th>Destination:</th><td>"+n[e].DESTINATION+"</td><th>Line:</th><td>"+n[e].LINE+"</td><th>Station:</th><td>"+n[e].STATION+"</td><th>Waiting time:</th><td>"+n[e].WAITING_TIME+"</td><th>Direction:</th><td>"+n[e].DIRECTION+"</td><th>Event Time:</th><td>"+n[e].EVENT_TIME+"</td></tr>";o+="</table>",document.getElementById("id01").innerHTML=o;var r=idb.open("tdatabase",8,function(t){var o=t.createObjectStore("TRAIN",{keyPath:"WAITING_SECONDS",autoIncrement:!1});for(o.createIndex("StationName","STATION",{unique:!1,multientry:!0}),e=0;e<n.length;e++)o.put(n[e])});r.onsucess=function(t){var e=t.transaction("TRAIN","readwrite"),o=e.objectStore("TRAIN");n.forEach(function(t){o.put(t)})}}!function(){function t(t){return Array.prototype.slice.call(t)}function e(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function n(t,n,o){var r,i=new Promise(function(i,c){r=t[n].apply(t,o),e(r).then(i,c)});return i.request=r,i}function o(t,e,o){var r=n(t,e,o);return r.then(function(t){return t?new a(t,r.request):void 0})}function r(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]}})})}function i(t,e,o,r){r.forEach(function(r){r in o.prototype&&(t.prototype[r]=function(){return n(this[e],r,arguments)})})}function c(t,e,n,o){o.forEach(function(o){o in n.prototype&&(t.prototype[o]=function(){return this[e][o].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return o(this[e],r,arguments)})})}function s(t){this._index=t}function a(t,e){this._cursor=t,this._request=e}function d(t){this._store=t}function p(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)}})}function l(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new p(n)}function h(t){this._db=t}r(s,"_index",["name","keyPath","multiEntry","unique"]),i(s,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(s,"_index",IDBIndex,["openCursor","openKeyCursor"]),r(a,"_cursor",["direction","key","primaryKey","value"]),i(a,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(a.prototype[t]=function(){var n=this,o=arguments;return Promise.resolve().then(function(){return n._cursor[t].apply(n._cursor,o),e(n._request).then(function(t){return t?new a(t,n._request):void 0})})})}),d.prototype.createIndex=function(){return new s(this._store.createIndex.apply(this._store,arguments))},d.prototype.index=function(){return new s(this._store.index.apply(this._store,arguments))},r(d,"_store",["name","keyPath","indexNames","autoIncrement"]),i(d,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getAllKeys","count"]),u(d,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),c(d,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new d(this._tx.objectStore.apply(this._tx,arguments))},r(p,"_tx",["objectStoreNames","mode"]),c(p,"_tx",IDBTransaction,["abort"]),l.prototype.createObjectStore=function(){return new d(this._db.createObjectStore.apply(this._db,arguments))},r(l,"_db",["name","version","objectStoreNames"]),c(l,"_db",IDBDatabase,["deleteObjectStore","close"]),h.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},r(h,"_db",["name","version","objectStoreNames"]),c(h,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[d,s].forEach(function(n){n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),o=n[n.length-1],r=(this._store||this._index)[e].apply(this._store,n.slice(0,-1));r.onsuccess=function(){o(r.result)}}})}),[s,d].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,o=[];return new Promise(function(r){n.iterateCursor(t,function(t){return t?(o.push(t.value),void 0!==e&&o.length==e?void r(o):void t["continue"]()):void r(o)})})})});var f={open:function(t,e,o){var r=n(indexedDB,"open",[t,e]),i=r.request;return i.onupgradeneeded=function(t){o&&o(new l(i.result,t.oldVersion,i.transaction))},r.then(function(t){return new h(t)})},"delete":function(t){return n(indexedDB,"deleteDatabase",[t])}};"undefined"!=typeof module?module.exports=f:self.idb=f}(),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:"./"}).then(function(t){return navigator.serviceWorker.controller?t.waiting?void index.controller._updateReady():t.installing?void indexController._trackInstalling(t.installing):void console.log("Service worker registered!"):void 0})["catch"](function(t){console.log("There was an error!")});var xmlhttp=new XMLHttpRequest,url="https://jsonp.afeld.me/?url=http://developer.itsmarta.com/RealtimeTrain/RestServiceNextTrain/GetRealtimeArrivals?apikey=9b3fd45f-5b07-481c-8b3a-74b5e987d7fd";"withCredentials"in xmlhttp&&(xmlhttp.open("GET",url,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&myFunction(xmlhttp.responseText)},xmlhttp.send()),$(document).ready(function(){$("#id01").hide(),$("#filter").keyup(function(){var t=$(this).val(),e=0;$(".search tr").each(function(){$(this).text().search(new RegExp(t,"i"))<0?$(this).fadeOut():($(this).show(),e++)});$("#filter-count").text("Number of Trains = "+e)})}),$(document).ready(function(){$("#search").click(function(){$("#id01").show()})}),$(document).ready(function(){$(".button-collapse").sideNav()});